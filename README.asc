= Public-Permissioned Blockchain Networks
:author: Jesus Ruiz
:email: hesus.ruiz@gmail.com
:revnumber: 0.1
:revdate: 21-07-2019
:numbered:
:imagesdir: assets
:bibtex-file: bibliography.bib
:bibtex-order: alphabetical
:bibtex-style: ieee

(Version: {revnumber}, Version Date: {revdate})


Until now the words *Public* and *Permissioned* have been used as opposites, where *Permissioned*
is seen as synonymous with *Private*. However, as the following sections describe, a new kind of
blockchain network is emerging, being pioneered by https://alastria.io/[Alastria]. Such a network
brings a lot of value to the digitization of the productive economy of a country, complementing
(but not replacing) the other types of networks, namely Public-Permissionless (like Bitcoin or
Ethereum) and Private-Permissioned (aka Private Consortiums).

.Blockchain taxonomy
image::BlockchainTaxonomy.jpg[Blockchain taxonomy,scaledwidth=70.0%]

== Introduction

A Public-Permissioned blockchain network tries to obtain the best of both worlds, combining the
permissioning from private consortiums with a decentralized governance model, in order to obtain
features required for the implementation of many important use cases that can not fit any of the
currently existing networks.

.Best of both worlds
image::BestOfBoth.jpg[Best of both worlds,scaledwidth=70.0%]

//-

The *Permissioning* from Consortiums brings the following benefits:

* *technical* (eg. performance, scalability),
* *compliance* (eg. easier to comply with GDPR or AML regulation),
* *operational* (easier to manage and implement crisis management),
* *economical* (the infrastructure does not need for its operation an embedded cryptocurrency
subject to speculation).

On the other hand, the word *Public* has in this context a different meaning than the one used
(improperly) until now.

A Public-Permissioned network is public in much the same way as most essential public services like
public health, public education or public roads. Using the analogy of those public services, there
are no artificial barriers in order to access public health or public education, but the services
are ``**permissioned**'', in the sense that citizens have to identify themselves. In the case of
public roads, the criteria is more stringent but in any case it is objective and transparent: any
car using the public roads has to display very clearly the license plate, which is sort of the
identity of the car. Furthermore, anyone can drive a car in the public roads, provided she has a
valid driver’s license.

Indeed, there are public goods that do not require ``permissioning'' in order to use them, but when
those goods are scarce and subject to depletion if abused, then permissioning is required in order
to ensure inclusion, fair access and usage and sustainability of the resource.

=== The Position of Alastria in the _Trust Continuum_

It can be argued that requiring the network to be permissioned reduces decentralization and
increases the level of trust required by participants in the network. Even though in practice
Public-Permissionless networks are more centralized than they are normally assumed to be, from a
theoretical point of view, Alastria (and in general Public-Permissioned networks) can be positioned
in the so-called _Trust Continuum_ as depicted in @Fig:countrynet and @Fig:differentproblems.

.A country blockchain network
image::CountryBlockchain.jpg[A country blockchain network,scaledwidth=70.0%]

.Different problems need different solutions
image::DifferentProblems.jpg[One Size Does Not Fit All,scaledwidth=70.0%]

== The Governance Model

If a network is permissioned, in order to merit the name of Public-Permissioned a special
Governance Model is required in order to ensure inclusion, fair access and usage and sustainability
of the network, and that it is not controlled by a single entity or a cartel of entities. More
concretely, this blockchain network could be considered as a new type of infrastructure with the
following principles [@navarroNetworkInfrastructuresCommons2018]:

. *Non-discriminatory and open access:* Access is non-discriminatory, even if it is not free
because pricing is determined using transparent mechanisms, typically cost- oriented. Access is
open because everybody has the right to join and use the infrastructure according to the access
rules.

. *Open participation:* Everybody has the right to join the community to participate in the
construction, operation, provision and governance of the infrastructure. The network should be
inclusive, open to participation of any entity independent of size or sector of activity.

Such a governance model is critical in providing the required level of trust, or confidence, in the
network from all participants. Running a network that is at the same time permissioned, public (in
the sense of inclusive) and sustainable, presents many challenges that have to be addressed
explicitly and are specific to this type of network and that do not appear in either
Public-Permissionless or Consortium networks.

=== The blockchain as a Common-Pool Resource (CPR)

As exemplified in the ``Blockchain trilemma'' [@buterinShardingBlockchains2014], blockchain
networks can be considered as a technical resource that can not be scaled easily. If we consider
for example the throughput (number of transactions per unit of time that the network can process
globally for all users), we can see that with a given blockchain technology this resource does not
scale easily. This is contrast with other infrastructures like the Internet connectivity, where the
bandwidth can be scaled by adding communication lines in parallel. Or in traditional applications,
adding more machines or bigger ones can scale the number of transactions per second.

In this sense, a Public-Permissioned blockchain network can be considered as a communal resource
similar to the ones described by Elinor Ostrom, Nobel Prize in Economics 2009
[@ostromGoverningCommonsEvolution1990]. Ostrom’s studies focussed on how communities manage to
successfully govern communal resources by revisiting Hardin’s influential article on ``The tragedy
of the commons'' [@hardinTragedyCommons1968].

This governance model is different from the two standard ways of managing private goods or public
goods, and is the most efficient for goods that have the property of subtractability, like private
goods, but they share the difficulty of exclusion with public goods. This concept is represented in
@Fig:cpr.

.Common-Pool Resources
image::CommonPoolResources.jpg[Common-Pool Resources,scaledwidth=60.0%]

=== On-chain Governance complementing Off-chain Governance

A unique property of a blockchain network with respect to all other Common-Pool Resources (natural
resources or classical technical infrastructures) is the ability to encode some governance rules
using the programmable nature of the blockchain, making the enforcement of the rules not only
transparent but also automatic and immutable. This is what we call ``**on-chain governance**''. The
literature has a small number of documents describing governance models and their automated
implementation based on the blockchain [@davidsonDisruptingGovernanceNew2016a], but in general they
are at the application (dApp) level, and they assume the existence of a blockchain network with the
appropriate characteristics [@rozasWhenOstromMeets2018]. We are instead interested on the
governance model required for the management and operation of a blockchain network infrastructure
which is Public-Permissioned as described above. That is, on _governance *of* the blockchain_
instead of _governance *by* the blockchain_. And specifically on the on-chain governance of the
blockchain network infrastructure, in contrast to the off-chain governance processes.

=== The eight principles for managing a Commons

Ostrom [@ostromGoverningCommonsEvolution1990] defines eight principles for efficiently managing
Common-Pool Resources:

[width="100%",cols="7%,40%,53%",options="header",]
|===
| |Principle |Description
|*1.a* |*User boundaries* |Clear boundaries between legitimate users and nonusers must be clearly
defined.

|*1.b* |*Resource boundaries* |Clear boundaries are present that define a resource system and
separate it from the larger biophysical environment.

|*2.a* |*Congruence with local conditions* |Appropriation and provision rules are congruent with
local social and environmental conditions.

|*2.b* |*Appropriation and provision* |The benefits obtained by users from a common-pool resource
(CPR), as determined by appropriation rules, are proportional to the amount of inputs required in
the form of labor, material, or money, as determined by provision rules.

|*3* |*Collective-choice arrangements* |Most individuals affected by the operational rules can
participate in modifying the operational rules.

|*4.a* |*Monitoring users* |Monitors who are accountable to the users monitor the appropriation and
provision levels of the users.

|*4.b* |*Monitoring the resource* |Monitors who are accountable to the users monitor the condition
of the resource.

|*5* |*Graduated sanctions* |Appropriators who violate operational rules are likely to be assessed
graduated sanctions (depending on the seriousness and the context of the offense) by other
appropriators, by officials accountable to the appropriators, or by both.

|*6* |*Conflict-resolution mechanisms* |Appropriators and their officials have rapid access to
low-cost local arenas to resolve conflicts among appropriators or between appropriators and
officials.

|*7* |*Minimal recognition of rights to organize* |The rights of appropriators to devise their own
institutions are not challenged by external governmental authorities.

|*8* |*Nested enterprises* |Appropriation, provision, monitoring, enforcement, conflict resolution,
and governance activities are organized in multiple layers of nested enterprises.
|===

=== On-chain governance and the CPR principles

When we see the applicability of Ostrom’s CPR managing principles to a Public-Permissioned
blockchain network, we see that there is a potential to automate the execution and enforcement of
some of the principles in a way that would be impossible for any other type of CPR. A summary can
be found in the following table.

[width="100%",cols="8%,33%,59%",options="header",]
|===
| |Principle |Description
|*1.a* |*User boundaries* |Self-Sovereign Identities (associated to legal identities) both for
natural and juridical persons.

|*1.b* |*Resource boundaries* |Decentralized permissioning of nodes via Smart Contracts connected
to Trusted Third Parties (TTPs) and other official Registries and Regulatory bodies in the country
(eg. the Spanish Business Registry for normal businesses, or the Ministry of Education for
Universities).

|*4.a* |*Monitoring users* |Using Gas to control resource usage by accounts (self-monitoring).Need
transaction origin traceability (enode that injected tx)

|*4.b* |*Monitoring the resource* |Monitor the Consensus execution (eg. report detectable Crash and
Byzantine behavior) in a transparent way

|*5* |*Graduated sanctions* |Automated proactive and reactive management of the Consensus set via
Smart Contracts complemented with off-chain sanctioning.

|*6* |*Conflict-resolution mechanisms* |At the lowest level of the operation of the network, the
same mechanisms used for monitoring and graduated sanctions are used for automated arbitration of
conflicts arising among members (eg. non-compliance to the Service Level Objectives defined in the
operational policies of the network).
|===

== The Consensus algorithm and On-chain Governance

The consensus algorithm is one of the most important components of a blockchain network, affecting
many aspects of the system like scalability, sustainability and even to the governance of the
technical platform. In addition, governance of the consensus set is critical to the level of trust
that this network has for the rest of the participants (the so-called ``regular nodes'').

The current Alastria network, Red T, uses _Istanbul Byzantine Fault Tolerance_ (IBFT) as consensus
algorithm, which belongs to a family of PBFT consensus algorithms sharing many of the properties
heavily discussed and formally proven during the last decades [@castroPracticalByzantineFault1999], <<castroPracticalByzantineFault1999>>
and its properties are very well known.

When applied to the blockchain, the PBFT variants comply with the *Robustness property*
[@saltiniCorrectnessAnalysisIBFT2019] when the maximum number of Byzantine validator nodes *t*
follows the well-known relationship with *n*, the total number of validator nodes:

*n = 3t + 1*.

However, standard implementations of PBFT and in particular IBFT, tend to focus on masking
failures. That is, they make failures transparent to the users, but they do not manage those
failures in a way that proactive or reactive measures can be taken to ensure the long-term health
of the network.

This is the reason why Alastria is implementing a set of tools surrounding the base IBFT consensus
algorithm, which together with complementary off-chain governance processes allow the realization
of the the principles of the governance of the blockchain as a Common-Pool Resource.

=== An example of on-chain governance of the Consensus set

The subject is too complex to be thoroughly treated in a reduced space, but @Fig:onchain describes
a summary of an example of on-chain governance of the blockchain network.

[.thumb]
.On-chain governance of consensus nodes
image::OnChainConsensus.jpg[On-chain governance of Consensus set,scaledwidth=100.0%]

The following aspects can be observed:

* The consensus nodes in the Active state (that is, executing the base IBFT algorithm) are being
monitored, as per principle 4.b of the CPR governance principles

* The events signaling different types of faults are used for the reactive governance of the nodes.
Even though it is not shown in the figure, in addition to the automated reaction, the events are
reported in a way that any participant in the blockchain network (not just the consensus nodes).
This is required to implement the high levels of transparency and collaborative monitoring that are
required for the effective management of CPR resources.

* Depending on the severity of the fault detected (crash or byzantine), the system reacts
automatically applying a graduated set of sanctions, as per the principle 5 of CPR governance. For
example, when the fault is byzantine, the consensus node affected is put in quarantine, effectively
stopping the node from participating in the consensus execution. If the owner is willing to
continue participating, a manual process (off-chain governance) is required, with sufficient
explanation and justification to the other members in order to be accepted again.

[bibliography]
== References

- [[[castroPracticalByzantineFault1999, 1]]] M. Castro and B. Liskov, “Practical Byzantine Fault Tolerance,” Proceedings ofthe Third Symposium on Operating Systems Design and Implementation, New Orleans, USA, February 1999, no. February, pp. 173–186, 1999.